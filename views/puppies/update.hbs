<div class="container d-flex justify-content-center my-3">
  <div class="col-sm-8 col-md-6">

    <form id="form-update-puppy" action="/puppies/update" enctype="multipart/form-data" method="POST">
        <h2>Update puppy</h2>

            <div class="form-group">
            <label for="input-username">Name of Puppy</label>
            <input type="text" class="form-control" value="{{puppy.name}}" placeholder="Name" name="name">
            </div>


            <div class="form-group">

            <label for="gender">Gender</label>
            <select id="gender" class="form-control" value="{{puppy.gender}}" name="gender">
                {{#if puppy.male}}
                    <option selected value="Male">Male</option>
                {{else}}
                    <option value="Male">Male</option>
                {{/if}}
                {{#if puppy.female}}
                    <option selected value="Female">Female</option>
                {{else}}
                    <option value="Female">Female</option>
                {{/if}}
            </select>

            </div>

            <div class="form-group">
                <div class="breed-div">
                    <label for="breed">Breed</label>
                    {{#each puppy.breed }}
                    <input class="breed form-control" value="{{this}}" type="text" placeholder="Breed" name="breed">
                    {{/each}}
                    <button id="add-breed-btn" class="btn btn-secondary button m-1">Add breed</button>
                    <button id="delete-breed-btn" class="btn btn-secondary button m-1">Delete breed</button>
                </div>
            </div>


            <div class="form-group">
                <label for="birthDate">Date of Birth</label>

                <input class="form-control" type="date" value="{{puppy.birthDate}}" placeholder="Birth Date" name="birthDate">

            </div>

        <div class="form-group">

            <div class="color-div">
                <label for="colors">Coat Colors</label>

                {{#each puppy.colors }}
                    <input class="color form-control" value="{{this}}" type="text" placeholder="Color" name="colors">
                {{/each}}                
                <button id="add-color-btn" class="btn btn-secondary button m-1">Add color</button>
                <button id="delete-color-btn" class="btn btn-secondary button m-1">Delete color</button>
            </div>
        </div>


        <div class="form-group">
            <label for="price">Price</label>
            <input type="number" class="form-control" value="{{puppy.price}}" placeholder="Price" name="price" min="0">
        </div>


        <div class="form-group">
            <label for="price">Description</label>
            <input type="text" class="form-control" value="{{puppy.description}}" placeholder="Description" name="description">
        </div>

        <div class="form-group">
            <label for="mainPicture">Profile Picture</label>
        </div>
        <div class="form-group">
            <img class="main-pic" class="form-control" src="{{ puppy.mainPicturePath }}" alt="">
            <button id="delete-main-picture-btn" class="btn btn-secondary button m-1">Delete main picture</button>
            <input type="text" hidden value="{{puppy.mainPicture}}" name="mainPicture">
            <input type="text" hidden value="{{puppy.mainPicturePath}}" name="mainPicturePath">        
        </div>

        {{!-- <div class="form-group">
            <label for="OtherPictures">More Pictures</label>
        </div> --}}



            {{!-- <div class="pictures-div">
                <input multiple class="pictures " type="file" name="pictures">
                <button id="add-picture-btn" class="btn">Add picture</button>
                <button id="delete-picture-btn" class="btn">Delete picture</button>
            </div> --}}

        <input type="text" hidden value="{{puppy.id}}" name="id">


        <button type="submit" class="btn btn-secondary">Update Puppy</button>

            
        </form>

        {{#if errorMessage}}
        <p class="error">{{errorMessage}}</p>
        {{/if}}
    </div>
</div>


<script src="/javascripts/btn-create-update-puppy.js"></script>

<script>
let $mainPictureDiv = document.querySelector(".main-picture-div");
let $deleteMainPictureBtn = document.querySelector("#delete-main-picture-btn");
let $mainPictureToRemove = $mainPictureDiv.querySelector(".main-picture");
$deleteMainPictureBtn.addEventListener("click", e => {
    e.preventDefault();
    

    let $newMainPicture = document.createElement("input");
    $newMainPicture.setAttribute("type", "file");
    $newMainPicture.setAttribute("id", "main-picture");
    $newMainPicture.setAttribute("name", "pictures");
    $mainPictureDiv.insertBefore($newMainPicture, $deleteMainPictureBtn);
    $mainPictureDiv.removeChild($mainPictureToRemove);
    $mainPictureDiv.removeChild($deleteMainPictureBtn);
    
})
</script>
